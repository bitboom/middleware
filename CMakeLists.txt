CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT(user-monitor C)
SET(VERSION_MAJOR 0)
SET(VERSION "${VERSION_MAJOR}.1.0")
SET(PREFIX ${CMAKE_INSTALL_PREFIX})
SET(LIBDIR "\${prefix}/lib")
SET(INCLUDEDIR "\${prefix}/include")

SET(LIBS        ${PROJECT_SOURCE_DIR}/src/libs)
SET(SERVER      ${PROJECT_SOURCE_DIR}/src/server)
SET(INCLUDE_DIR src/include)

INCLUDE_DIRECTORIES(${INCLUDE_DIR})

INCLUDE(FindPkgConfig)

# Setup this later
# SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Werror -Wall -Wextra -g")

FOREACH(flag ${pkgs_CFLAGS})
	SET(EXTRA_CFLAGS "${EXTRA_CFLAGS} ${flag}")
ENDFOREACH(flag)

SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${EXTRA_CFLAGS}")

ADD_SUBDIRECTORY(${LIBS})
ADD_SUBDIRECTORY(${SERVER})

INSTALL(DIRECTORY ${INCLUDE_DIR}/ DESTINATION ${INCLUDEDIR}
            FILES_MATCHING
            PATTERN "*_private.h" EXCLUDE
            PATTERN "${INCLUDE_DIR}/*.h"
        )


