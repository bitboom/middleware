#!/bin/bash
PATH=/bin:/usr/bin:/sbin:/usr/sbin

#  Copyright (c) 2017 Samsung Electronics Co., Ltd All Rights Reserved
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License
#
# @file        pre-test.sh.in
# @author      Sangwan Kwon (sangwan.kwon@samsung.com)
# @brief       Set permission script for test
#

CLAUNCHER=@BIN_INSTALL_DIR@/@TARGET_TANCHOR_TEST@-capi-launcher
CPPLAUNCHER=@BIN_INSTALL_DIR@/@TARGET_TANCHOR_TEST@-launcher

# change owner to system
chown @USER_NAME@:@GROUP_NAME@ $CLAUNCHER
chown @USER_NAME@:@GROUP_NAME@ $CPPLAUNCHER

# run test program as owner
chmod 4755 $CLAUNCHER
chmod 4755 $CPPLAUNCHER

# launch() needs CAP_SYS_ADMIN
setcap cap_sys_admin+ep $CLAUNCHER
setcap cap_sys_admin+ep $CPPLAUNCHER
